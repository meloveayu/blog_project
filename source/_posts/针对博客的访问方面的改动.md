---
title: 针对博客的访问方面的改动
date: 2020-03-17 11:03:28
categories: 实用小文章
tags:
  - Hexo
  - CDN
---

前天晚上和昨天晚上，为自己的博客配置了自己的域名，使用了 cloudflare 的免费 CDN 服务加速网站访问，还大费周章的调整了访问节点，速度快了不少，但是也不能期望太高。 😂

<!--more-->

今天上午看点数学，越看越困，干脆先放一放，总结一下做的事。
首先是配置域名的事，这个简单，要是有国外支付手段的话可以去买国外的域名，国内的也就是多了个上传个人身份信息备案的步骤，价格上只要你不买什么特牛逼的域名，也挺便宜的，像 xyz 这种新顶级域名，只要 6 块钱注册费，以后每年续费大概也就是 60 多块，自己看着买就行了。
关于域名解析的问题，简单来说就是把域名指向你的网站，在你买域名的注册商那里配置就行，解析规则配置也挺简单的，像是 A 策略就是把域名指向服务器的 ipv4 地址，CNAME 就是把域名指向另一个域名什么的……因为我博客仅仅是一个 Github Page，配置 CNAME 即可，二级域名就设了 www 和@两个。在你的网页仓库里同时也要在设置里添加自己的域名，这时会在根目录下生成 CNAME 文件，里面正是你的域名。做完这些大概等一段时间生效就可以用自己的域名访问到博客页面了。
**补充：这篇文章发上去之后，发现自己访问绑定的域名直接 404，访问原域名倒还行，一看是`hexo d`命令在上传生成的 public 文件夹时候直接把 CNAME 文件给覆盖没了……解决方法是在工程里的 source 文件夹里写 CNAME 文件，这样生成 public 文件夹时就会把它原封不动搬过去，不会丢了。**
做完这些其实我已经很满意了，但是想起之前把博客地址发给朋友看，朋友死活打不开的问题……😳 我还是上网搜了搜怎么加速页面访问速度，结果看到了 CDN，而且有免费的，可以白嫖，令人内心无比感激。😀
**CDN 指内容分发网络，指的是服务提供商把你的网站文件定期拷贝就近放在他家服务器里，访问者访问时可以就近访问，以此加快访问速度。**
首先国内免费的 CDN 不少,目前看看，感觉又拍云的不错，挂上他家 logo，还可以每年送你流量包，还支持 https……（太好了，穷学生感激落泪……就是我域名备案太晚，死活不给过……）结果选了 cloudflare，一家美国的全球 CDN 提供商。
总的来说 cloudflare 的服务很好，即使你不用他的 CDN 服务，他免费版提供的安全保护也是很强的（虽然我这小网站确实是没啥可保护的，但是有总比没有好啊），但是这么说的另一方面就是说他家的 CDN 服务在中国境内有点平庸，在国外倒是非常好……😅 不过白嫖的瓜你还要说不甜着实是过分了点，先配置起来再说。
总的来说非常简单，去 cloudflare 注册账户，然后输入你想开启 CDN 服务的域名，选上免费版服务，然后按他的要求将你的域名 dns 服务器改成他家的（说实话这家 CDN 修改 DNS 服务器有点别具一格的特色，但在国内还是不太行，之后解决这个问题），就这么简单，然后你就得重新在 cloudflare 再配置一遍域名解析。然后就成了。👌 感觉好的地方是首先你开 https 服务，SSL 证书不用像国内那样去申请，直接就有了，你还可以在安全配置里各种有用的安全配置拉满，连页面规则都可以设置三个（虽然完全不懂怎么设置），感觉巨贴心。
测试一下当然速度还是有一点点提升的，从完全超时到可以勉强上去，稍微强了一点。
但是不能满意，cloudflare 的 dns 解析总是绕开中国跑去美国的节点访问……所以该慢还是慢，需要采取措施来将节点调整到最近的香港节点。简单来说，中国有 cloudflare 的联营伙伴，可以绑定 cloudflare 的账号，更加细化地选择节点。
我选择的是笨牛网这家联营平台，个人感觉就是个 cloudflare 的中国版控制台，安全策略都可以在上面直接改动。你绑定了 cloudflare 的账号也可以管理上面的服务。这里的话就直接把接入方式改成笨牛网的 CNAME 接入，这个时候你就需要在笨牛网配置解析规则了，照抄 cloudflare 上的，之后可以把域名的 dns 服务器换回先前的了……（得，又回去了）再在域名的解析规则里，条数不变，类型不变，指向的是笨牛网配置完解析规则后提供的以`cdn.cloudflare.net`结尾的回源地址，然后就完成了。个人理解是访问的过程中加了一层中间层，跳转了两个 dns，大概吧。🤔
测试了一下，速度不错，200ms 左右延时，比较满意了。
这一通操作下来，感觉还学了不少嘛！😄
